# ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã!

## üêõ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. ‚úÖ –ö—Ä–∞—à –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—Ä–æ—Å–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∫–∞–º–µ—Ä—ã

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∫—Ä–∞—à–∏–ª–æ—Å—å –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—Ä–æ—Å–µ –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–∞–º–µ—Ä–µ.

**–ü—Ä–∏—á–∏–Ω–∞:** –ö–∞–º–µ—Ä–∞ –∑–∞–ø—É—Å–∫–∞–ª–∞—Å—å –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —Å –∑–∞–ø—Ä–æ—Å–æ–º —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è, –¥–æ —Ç–æ–≥–æ –∫–∞–∫ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –±—ã–ª–æ –ø–æ–ª—É—á–µ–Ω–æ.

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- –ò–∑–º–µ–Ω–µ–Ω–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å: —Å–Ω–∞—á–∞–ª–∞ –∑–∞–ø—Ä–æ—Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è, –ø–æ—Ç–æ–º –∑–∞–ø—É—Å–∫ –∫–∞–º–µ—Ä—ã
- –ö–∞–º–µ—Ä–∞ —Ç–µ–ø–µ—Ä—å –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤ callback'–µ –ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è
- –§–∞–π–ª: `app/src/main/java/com/plantscanner/ui/screens/HomeScreen.kt`

### 2. ‚úÖ –¢–∞–π–º–∞—É—Ç –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –∫ LM Studio

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–∞ —ç–º—É–ª—è—Ç–æ—Ä–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ —Ç–∞–π–º–∞—É—Ç - –∑–∞–ø—Ä–æ—Å –Ω–µ –¥–æ—Ö–æ–¥–∏—Ç –¥–æ LM Studio.

**–ü—Ä–∏—á–∏–Ω–∞:** 
- IP –∞–¥—Ä–µ—Å `172.16.0.1` –º–æ–∂–µ—Ç –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω–æ–º—É IP –ü–ö
- –¢–µ–ª–µ—Ñ–æ–Ω –Ω–µ –º–æ–∂–µ—Ç –¥–æ—Å—Ç—É—á–∞—Ç—å—Å—è –¥–æ —Å–µ—Ä–≤–µ—Ä–∞ —á–µ—Ä–µ–∑ WiFi
- –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–π timeout –¥–ª—è –º–µ–¥–ª–µ–Ω–Ω—ã—Ö —Å–µ—Ç–µ–π

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**

#### a) –£–≤–µ–ª–∏—á–µ–Ω—ã —Ç–∞–π–º–∞—É—Ç—ã:
```kotlin
const val CONNECT_TIMEOUT = 30L  // –±—ã–ª–æ 60L
const val READ_TIMEOUT = 120L    // –±—ã–ª–æ 60L  (–¥–ª—è AI –æ–±—Ä–∞–±–æ—Ç–∫–∏)
const val WRITE_TIMEOUT = 60L    // –±—ã–ª–æ 60L
```

#### b) –î–æ–±–∞–≤–ª–µ–Ω retry –Ω–∞ –æ—à–∏–±–∫–∞—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:
```kotlin
.retryOnConnectionFailure(true)
```

#### c) –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:
- –õ–æ–≥–∏ –≤—Å–µ—Ö —ç—Ç–∞–ø–æ–≤ –æ–±—Ä–∞–±–æ—Ç–∫–∏
- –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è ConnectionException
- –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è SocketTimeoutException
- –ü–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

#### d) –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏—è (Connection/Timeout/Other)
- –ü–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –¥–µ—Ç–∞–ª–µ–π –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

**–§–∞–π–ª—ã:**
- `app/src/main/java/com/plantscanner/util/Constants.kt`
- `app/src/main/java/com/plantscanner/data/repository/PlantRepository.kt`
- `app/src/main/java/com/plantscanner/ui/screens/HomeScreen.kt`

---

## üì¶ –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π APK

```
üì¶ app-debug.apk
üìè –†–∞–∑–º–µ—Ä: 16.71 –ú–ë
üìÖ –î–∞—Ç–∞: 25.10.2025 22:42
üìç –ü—É—Ç—å: app/build/outputs/apk/debug/app-debug.apk
```

---

## üîß –ö–∞–∫ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—É —Å —Å–µ—Ç—å—é

–°–æ–∑–¥–∞–Ω –ø–æ–ª–Ω—ã–π –≥–∞–π–¥: **NETWORK_TROUBLESHOOTING.md**

### –ë—ã—Å—Ç—Ä–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:

1. **–£–∑–Ω–∞–π—Ç–µ IP –≤–∞—à–µ–≥–æ –ü–ö:**
   ```cmd
   ipconfig
   ```
   –ò—â–∏—Ç–µ `IPv4 Address` –¥–ª—è WiFi: –Ω–∞–ø—Ä–∏–º–µ—Ä `192.168.1.100`

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ —Ç–µ–ª–µ—Ñ–æ–Ω–∞:**
   ```
   http://192.168.1.100:1234/v1/models
   ```
   –î–æ–ª–∂–µ–Ω –æ—Ç–∫—Ä—ã—Ç—å—Å—è JSON —Å –º–æ–¥–µ–ª—å—é

3. **–ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç - –∏–∑–º–µ–Ω–∏—Ç–µ IP –≤ –∫–æ–¥–µ:**
   
   –û—Ç–∫—Ä–æ–π—Ç–µ: `app/src/main/java/com/plantscanner/util/Constants.kt`
   
   –ë—ã–ª–æ:
   ```kotlin
   const val LM_STUDIO_BASE_URL = "http://172.16.0.1:1234/"
   ```
   
   –ò–∑–º–µ–Ω–∏—Ç–µ –Ω–∞:
   ```kotlin
   const val LM_STUDIO_BASE_URL = "http://192.168.1.100:1234/"
   ```
   
4. **–ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:**
   ```
   .\gradlew.bat assembleDebug
   ```
   –ò–ª–∏ –≤ Android Studio: `Shift+F10`

---

## üì± –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É

### 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π APK:

```bash
adb install -r app\build\outputs\apk\debug\app-debug.apk
```

### 2. –û—Ç–∫—Ä–æ–π—Ç–µ Logcat –≤ Android Studio:

- –§–∏–ª—å—Ç—Ä: `PlantRepository`
- Tag: –í—Å–µ
- Package: `com.plantscanner`

### 3. –°–¥–µ–ª–∞–π—Ç–µ —Ñ–æ—Ç–æ —Ä–∞—Å—Ç–µ–Ω–∏—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

### 4. –°–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏:

#### ‚úÖ –£—Å–ø–µ—à–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:
```
D/PlantRepository: === Starting plant analysis ===
D/PlantRepository: Image URI: ...
D/PlantRepository: LM Studio URL: http://172.16.0.1:1234/
D/PlantRepository: Loading image...
D/PlantRepository: Image size: 1024x768
D/PlantRepository: Converting to base64...
D/PlantRepository: Base64 size: 123456 chars
D/PlantRepository: Sending request to LM Studio...
D/PlantRepository: Model: google/gemma-3-12b
D/PlantRepository: Got response! Tokens used: 1234
D/PlantRepository: Response text length: 567
D/PlantRepository: Parsed plant: –†–æ–º–∞—à–∫–∞
D/PlantRepository: Saved to database with ID: 1
D/PlantRepository: === Analysis completed successfully ===
```

#### ‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:
```
D/PlantRepository: === Starting plant analysis ===
D/PlantRepository: LM Studio URL: http://172.16.0.1:1234/
D/PlantRepository: Loading image...
D/PlantRepository: Sending request to LM Studio...
E/PlantRepository: !!! CONNECTION FAILED !!!
E/PlantRepository: Cannot connect to http://172.16.0.1:1234/
E/PlantRepository: Error: Failed to connect to /172.16.0.1:1234
```

**–†–µ—à–µ–Ω–∏–µ:** IP –∞–¥—Ä–µ—Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∏–ª–∏ –ü–ö –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω. –°–º–æ—Ç—Ä–∏ NETWORK_TROUBLESHOOTING.md

#### ‚è±Ô∏è –¢–∞–π–º–∞—É—Ç:
```
D/PlantRepository: === Starting plant analysis ===
D/PlantRepository: Sending request to LM Studio...
E/PlantRepository: !!! TIMEOUT !!!
E/PlantRepository: Request timeout to http://172.16.0.1:1234/
```

**–†–µ—à–µ–Ω–∏–µ:** –°–µ—Ä–≤–µ—Ä –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ LM Studio –∑–∞–ø—É—â–µ–Ω –∏ –º–æ–¥–µ–ª—å –∑–∞–≥—Ä—É–∂–µ–Ω–∞.

---

## üéØ –ß–µ–∫-–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º

–£–±–µ–¥–∏—Ç–µ—Å—å:

- [ ] LM Studio –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ü–ö
- [ ] –°–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ `http://0.0.0.0:1234` (–Ω–µ localhost!)
- [ ] –ú–æ–¥–µ–ª—å `google/gemma-3-12b` –∑–∞–≥—Ä—É–∂–µ–Ω–∞
- [ ] –¢–µ–ª–µ—Ñ–æ–Ω –∏ –ü–ö –≤ **–æ–¥–Ω–æ–π WiFi —Å–µ—Ç–∏**
- [ ] –í—ã –∑–Ω–∞–µ—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π IP –∞–¥—Ä–µ—Å –ü–ö (–∏–∑ `ipconfig`)
- [ ] IP –∞–¥—Ä–µ—Å –≤ `Constants.kt` —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç IP –ü–ö
- [ ] Windows Firewall —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –ø–æ—Ä—Ç 1234
- [ ] –ë—Ä–∞—É–∑–µ—Ä –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç `http://–í–ê–®_IP:1234/v1/models`
- [ ] –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–µ—Ä–µ—Å–æ–±—Ä–∞–Ω–æ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è IP

---

## üöÄ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π APK** –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ IP –∞–¥—Ä–µ—Å** (—Å–º. NETWORK_TROUBLESHOOTING.md)
3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**
4. **–†–∞–∑—Ä–µ—à–∏—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ**
5. **–°–¥–µ–ª–∞–π—Ç–µ —Ñ–æ—Ç–æ** —Ä–∞—Å—Ç–µ–Ω–∏—è
6. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏** –≤ Logcat

–ï—Å–ª–∏ –≤—Å—ë –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ - –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∏–¥–µ–∞–ª—å–Ω–æ! üåø‚ú®

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **README.md** - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
- **QUICK_START.md** - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- **BUILD_SUCCESS.md** - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏
- **NETWORK_TROUBLESHOOTING.md** - üîß –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º —Å —Å–µ—Ç—å—é (–ù–û–í–û–ï!)
- **FIXES_APPLIED.md** - –≠—Ç–æ—Ç —Ñ–∞–π–ª (—á—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ)

---

**–í—Å–µ –ø—Ä–æ–±–ª–µ–º—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã! –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ –∫ —Ä–∞–±–æ—Ç–µ! üéâ**
